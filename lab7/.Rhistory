summary(amniota)
amniota %>%
summarise_all(~(sum(is.na(.))))
hist(amniota$egg_mass_g)
amniota_tidy <- amniota %>%
na_if("-999")
amniota_tidy %>%
summarise_all(~(sum(is.na(.))))
amniota_tidy %>%
purrr::map_df(~ sum(is.na(.))) %>%
pivot_longer(everything(),
names_to= "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
names(msleep)
msleep %>%
count(conservation, sort=T)
msleep %>%
mutate(conservation_modified = na_if(conservation, "domesticated"))%>%
count(conservation_modified, sort = T) #previously there were only 29 NA's
life_history <- readr::read_csv("data/mammal_lifehistories_v2.csv")
life_history %>%
skimr::skim()
life_history_tidy <- life_history %>%
na_if("-999")
life_history_tidy %>%
skimr::skim()
life_history_tidy %>%
summarize(number_nas=sum(is.na(life_history_tidy)))
life_history_tidy %>%
purrr::map_df(~ sum(is.na(.))) %>%
pivot_longer(everything(),
names_to= "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
head(fisheries)
tail(fisheries)
str(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarize(ncountries = n_distinct(country))
levels(fisheries_tidy$country)
fisheries_tidy_focused <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused
fisheries_tidy_focused %>%
summarize(n_taxa=n_distinct(asfis_species_number))
fisheries_tidy_focused %>%
filter(year==2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name== "Sardina pilchardus") %>%
filter(year>=1990 & year<=2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines1 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(asfis_species_name, "Sardina")) %>%
filter(year>=1990 & year<=2000)
sardines1 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines2 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(isscaap_taxonomic_group, "sardines")) %>%
filter(year>=1990 & year<=2000)
sardines2 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(str_detect(isscaap_taxonomic_group, "Squids")) %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name=="Cephalopoda") %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(isscaap_taxonomic_group=="Squids, cuttlefishes, octopuses") %>%
count(asfis_species_name, sort=T)
fisheries_tidy_focused %>%
filter(year>=2008 & year<=2012)%>%
group_by(asfis_species_name) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
library("tidyverse")
library("janitor")
library("skimr")
life_history <- readr::read_csv("data/mammal_lifehistories_v3.csv")
life_history <- janitor::clean_names(life_history)
life_history %>%
skimr::skim()
any_na(life_history)
life_history %>%
purrr::map_df(~ sum(is.na(.)))
life_history_tidy <- life_history %>%
na_if("-999")
life_history_tidy %>%
purrr::map_df(~ sum(is.na(.)))
naniar::miss_var_summary(life_history_tidy)
hist(life_history_tidy$max_life)
life_history_tidy <-
life_history_tidy %>%
mutate(max_life=na_if(max_life, 0))
naniar::miss_var_summary(life_history_tidy)
life_history_tidy %>%
group_by(order) %>%
select(order, wean_mass) %>%
naniar::miss_var_summary(order=T)
life_history %>%
naniar::replace_with_na(replace = list(newborn = "not measured", weaning= -999, wean_mass= -999, afr= -999, max_life= 0, litter_size= -999, gestation= -999, mass= -999)) %>%
naniar::miss_var_summary()
trade <- readr::read_csv("data/cites.csv")
str(trade)
trade <- janitor::clean_names(trade)
str(trade)
trade %>%
skimr::skim()
trade %>%
naniar::miss_var_summary()
trade %>%
group_by(class) %>%
naniar::miss_var_summary() %>%
filter(variable=="exporter_reported_quantity") %>%
arrange(desc(pct_miss))
library(visdat)
vis_dat(life_history_tidy) #classes of data
vis_miss(life_history_tidy)
life_history_advance <-
readr::read_csv(file = "data/mammal_lifehistories_v3.csv",
na = c("NA", " ", ".", "-999")) #all NA, blank spaces, .,and -999 are treated as NA
naniar::miss_var_summary(life_history_advance)
str(life_history)
summary(life_history)
life_history %>%
skimr::skim()
any_na(life_history)
life_history %>%
purrr::map_df(~ sum(is.na(.)))
hist(life_history$wean_mass)
life_history_tidy <- life_history %>%
na_if("-999","0")
life_history_tidy <- life_history %>%
na_if("-999") %>%
mutate(newborn = na_if(newborn, ("not measured"))) %>%
purrr::map_df(~ sum(is.na(.)))
life_history %>%
na_if("-999") %>%
mutate(newborn = na_if(newborn, ("not measured"))) %>%
purrr::map_df(~ sum(is.na(.)))
life_history_tidy <- life_history %>%
na_if("-999") %>%
mutate(newborn = na_if(newborn, ("not measured"))) %>%
purrr::map_df(~ sum(is.na(.)))
life_history_tidy <- life_history %>%
na_if("-999") %>%
mutate(newborn = na_if(newborn, ("not measured")))
life_history_tidy %>%
purrr::map_df(~ sum(is.na(.)))
naniar::miss_var_summary(life_history_tidy)
hist(life_history_tidy$max_life)
life_history_tidy <-
life_history_tidy %>%
mutate(max_life=na_if(max_life, 0))
naniar::miss_var_summary(life_history_tidy)
life_history_tidy %>%
skimr::skim()
trade %>%
group_by(class) %>%
select(class, exporter_reported_quantity) %>%
naniar::miss_var_summary(class=T)
trade %>%
group_by(class) %>%
select(class, exporter_reported_quantity) %>%
naniar::miss_var_summary(class=T) %>%
arrange(desc(pct_miss))
trade %>%
group_by(class) %>%
naniar::miss_var_summary() %>%
filter(variable=="exporter_reported_quantity") %>%
arrange(desc(pct_miss))
trade <- readr::read_csv("data/cites.csv")
str(trade)
trade <- janitor::clean_names(trade)
trade <- as.factor(trade$year)
str(trade)
trade %>%
skimr::skim()
trade %>%
naniar::miss_var_summary()
trade <- readr::read_csv("data/cites.csv")
str(trade)
trade <- janitor::clean_names(trade)
trade <- as.factor(trade$year)
str(trade)
trade %>%
skimr::skim()
trade <- readr::read_csv("data/cites.csv")
str(trade)
trade <- janitor::clean_names(trade)
trade$year <- as.factor(trade$year)
str(trade)
trade %>%
skimr::skim()
trade %>%
naniar::miss_var_summary()
trade %>%
group_by(class) %>%
select(class, exporter_reported_quantity) %>%
naniar::miss_var_summary(class=T) %>%
arrange(desc(pct_miss))
trade %>%
group_by(class) %>%
naniar::miss_var_summary() %>%
filter(variable=="exporter_reported_quantity") %>%
arrange(desc(pct_miss))
vis_dat(life_history_tidy) #classes of data
vis_miss(life_history_tidy)
life_history_advance <-
readr::read_csv(file = "data/mammal_lifehistories_v3.csv",
na = c("NA", " ", ".", "-999")) #all NA, blank spaces, .,and -999 are treated as NA
naniar::miss_var_summary(life_history_advance)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab6/data")
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab6/data")
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
names(fisheries)
dim(fisheries)
anyNA(fisheries)
fisheries <- fisheries %>%
clean_names()
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarise(ncountries = n_distinct(country))
fisheries_tidy_focused <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused %>%
summarize(nspecies = n_distinct(asfis_species_number))
fisheries_tidy_focused %>%
filter(year == 2000) %>%
group_by(country) %>%
summarize(catch_total = sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
filter(year >= 1990 & year <= 2000) %>%
group_by(country) %>%
summarize(sardine_decade = sum(catch, na.rm=T)) %>%
arrange(desc(sardine_decade))
fisheries_tidy_focused %>%
filter(str_detect(isscaap_taxonomic_group, "Squids")) %>%
filter(year >= 2008 & year <= 2012) %>%
group_by(country) %>%
summarise(catch_total = sum(catch), na.rm = T) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(year >= 2008 & year <= 2012) %>%
group_by(asfis_species_name) %>%
summarize(catch_total = sum(catch)) %>%
arrange(desc(catch_total))
#determine the least caught species between years 2004 and 2006.
fisheries_tidy_focused %>%
filter(year >= 2004 & year <= 2006) %>%
group_by(asfis_species_name) %>%
summarize(catch_total = sum(catch)) %>%
arrange(catch_total)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
head(fisheries)
tail(fisheries)
str(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
summarize(ncountries = n_distinct(country))
levels(fisheries_tidy$country)
fisheries_tidy_focused <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused
fisheries_tidy_focused %>%
summarize(n_taxa=n_distinct(asfis_species_number))
fisheries_tidy_focused %>%
filter(year==2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name== "Sardina pilchardus") %>%
filter(year>=1990 & year<=2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines1 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(asfis_species_name, "Sardina")) %>%
filter(year>=1990 & year<=2000)
sardines1 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines2 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(isscaap_taxonomic_group, "sardines")) %>%
filter(year>=1990 & year<=2000)
sardines2 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(str_detect(isscaap_taxonomic_group, "Squids")) %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name=="Cephalopoda") %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(isscaap_taxonomic_group=="Squids, cuttlefishes, octopuses") %>%
count(asfis_species_name, sort=T)
fisheries_tidy_focused %>%
filter(year>=2008 & year<=2012)%>%
group_by(asfis_species_name) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
options(dplyr.summarise.inform = FALSE)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
skim(fisheries)
names(fisheries)
dim(fisheries)
anyNA(fisheries)
str(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy
fisheries_tidy %>%
summarize(number_country=n_distinct(country))
fisheries_tidy %>%
count(country)
fisheries_tidy_focused <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused
fisheries_tidy_focused %>%
summarize(distinct_fish_species = n_distinct(asfis_species_number))
fisheries_tidy_focused %>%
filter(year==2000) %>%
group_by(country) %>%
summarize(catch_2000 = sum(catch, na.rm=T)) %>%
arrange(desc(catch_2000))
fisheries_tidy %>%
filter(between(year,1990,2000)) %>%
group_by(country) %>%
filter(asfis_species_name == "Sardina pilchardus") %>%
summarize(total_catch = sum(catch, na.rm=T)) %>%
arrange(desc(total_catch))
fisheries_tidy %>%
filter(between(year,2008,2012)) %>%
group_by(country) %>%
filter(asfis_species_name == "Cephalopoda") %>%
summarize(total_catch = sum(catch, na.rm=T)) %>%
arrange(desc(total_catch))
fisheries_tidy %>%
filter(between(year,2008,2012)) %>%
group_by(asfis_species_name) %>%
filter(asfis_species_name != "Osteichthyes") %>%
summarize(total_catch = sum(catch, na.rm=T)) %>%
arrange(desc(total_catch))
fisheries_tidy %>%
filter(between(year,1970,2010)) %>%
group_by(country) %>%
summarize(total_catch = sum(catch, na.rm=T)) %>%
arrange(desc(total_catch))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
names(fisheries)
fisheries <- janitor::clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
#fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
names(fisheries_tidy)
fisheries_tidy%>%
count(country,
total = n())
fisheries_tidy%>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy%>%
summarize(distinct_species = n_distinct(asfis_species_number))
fisheries_tidy%>%
filter(year == 2000)%>%
group_by(country)%>%
count(catch, sort = T)
fisheries_tidy%>%
filter(between(year, 1990, 2000),
asfis_species_name == "Sardina pilchardus")%>%
group_by(country)%>%
count(catch, sort = T)
fisheries_tidy%>%
filter(between(year, 2008, 2012),
asfis_species_name == "Cephalopoda")%>%
group_by(country)%>%
count(catch, sort = T)
fisheries_tidy%>%
filter(between(year, 2008, 2012))%>%
group_by(asfis_species_name)%>%
count(catch, sort = T)
fisheries_tidy%>%
filter(year == 2010,
asfis_species_name == "Sphyraena spp")%>%
group_by(country)%>%
count(catch, sort = T)
