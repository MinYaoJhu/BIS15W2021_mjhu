colors <- paletteer::palettes_d_names
View(colors)
my_palette <- paletteer_d("springfield_simpsons")
my_palette <- paletteer_d("ggsci::springfield_simpsons")
barplot(rep(1,14), axes=FALSE, col=my_palette)
p+scale_fill_manual(values=my_palette)+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p_hr <- homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=taxon))+
geom_point(size=2)+
labs(title = "Mass vs. Homerange",
x = "log10.mass",
y = "log10.hra") +
theme(plot.title = element_text(size = rel(1.5), hjust = 0.5))
p_hr + scale_colour_manual(values=my_palette)
homerange %>%
ggplot(aes(x = log10.mass, y = log10.hra, color = locomotion)) +
geom_point(na.rm = T)
homerange %>%
ggplot(aes(x = log10.mass, y = log10.hra, color = locomotion)) +
geom_point(na.rm = T) +
xlim(0, 4) +
ylim(1, 6)
p2 <- homerange %>%
ggplot(aes(x = log10.mass)) +
geom_density()
p2
p2+ facet_wrap(~taxon)
p2+ facet_wrap(~class)
homerange %>%
ggplot(aes(x = log10.mass, color = class)) +
geom_density()
pdf(homerange.pdf)
pdf(homerange.pdf)
pdf("homerange.pdf")
p2
dev.off
p+scale_fill_brewer(palette = "Paired")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p+scale_fill_brewer(palette = "Accent")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p+scale_fill_brewer(palette = "Pastel2")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p+scale_fill_brewer(palette = "Set1")+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
homerange %>%
ggplot(aes(x = log10.mass, y = log10.hra, color = locomotion)) +
geom_point(na.rm = T)+
annotate("text", label="r^2==0", parse=T, x=6, y=0)
p_hr <- homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=class))+
geom_point(size=2)+
labs(title = "Mass vs. Homerange",
x = "log10.mass",
y = "log10.hra") +
theme(plot.title = element_text(size = rel(1.5), hjust = 0.5))
p_hr <- homerange %>%
ggplot(aes(x=log10.mass, y=log10.hra, color=class))+
geom_point(size=2)+
labs(title = "Mass vs. Homerange",
x = "log10.mass",
y = "log10.hra") +
theme(plot.title = element_text(size = rel(1.5), hjust = 0.5))
p_hr
p_hr + scale_colour_manual(values=my_palette)
p_hr + scale_color_aaas()
p_hr + scale_color_npg()
p_tax <- homerange %>%
ggplot(aes(x=trophic.guild, fill=taxon))+
geom_bar(na.rm=T, position="dodge")
p_tax + scale_fill_manual(values=my_palette)+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p_tax <- homerange %>%
ggplot(aes(x=trophic.guild, fill=class))+
geom_bar(na.rm=T, position="dodge")
p_tax + scale_fill_manual(values=my_palette)+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p_tax + scale_fill_aaas()+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p_tax + scale_fill_npg()+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
p_tax <- homerange %>%
ggplot(aes(x=trophic.guild, fill=class))+
geom_bar(na.rm=T, position="dodge",alpha=0.75, color="black")
p_tax
homerange %>%
ggplot(aes(x=trophic.guild, y=class))+
geom_col(na.rm=T, position="dodge",alpha=0.75, color="black")
homerange %>%
ggplot(aes(x=trophic.guild, y=class, fill=class))+
geom_col(na.rm=T, position="dodge",alpha=0.75, color="black")
homerange %>%
ggplot(aes(x=trophic.guild, y=class, fill=class))+
geom_col(na.rm=T, position="dodge",alpha=0.75, color="black")+
scale_fill_manual(values=my_palette)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
head(fisheries)
tail(fisheries)
str(fisheries)
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
filter(country=="Western Sahara")
fisheries_tidy %>%
summarize(ncountries = n_distinct(country))
fisheries_tidy %>%
tabyl(country)
fisheries_tidy %>%
count(country)
levels(fisheries_tidy$country)
fisheries_tidy_focused <- fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused
fisheries_tidy_focused %>%
summarize(n_taxa=n_distinct(asfis_species_number))
fisheries_tidy_focused %>%
filter(year==2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name== "Sardina pilchardus") %>%
filter(year>=1990 & year<=2000) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines1 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(asfis_species_name, "Sardina")) %>%
filter(year>=1990 & year<=2000)
sardines1 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
sardines2 <- fisheries_tidy_focused %>%
filter(stringr::str_detect(isscaap_taxonomic_group, "sardines")) %>%
filter(year>=1990 & year<=2000)
sardines2 %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(str_detect(isscaap_taxonomic_group, "Squids")) %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(asfis_species_name=="Cephalopoda") %>%
filter(year>=2008 & year<=2012) %>%
group_by(country) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
fisheries_tidy_focused %>%
filter(isscaap_taxonomic_group=="Squids, cuttlefishes, octopuses") %>%
count(asfis_species_name, sort=T)
fisheries_tidy_focused %>%
filter(year>=2008 & year<=2012)%>%
group_by(asfis_species_name) %>%
summarize(catch_total=sum(catch, na.rm=T)) %>%
arrange(desc(catch_total))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv("data/FAO_1950to2012_111914.csv")
glimpse(fisheries)
names(fisheries)
fisheries<- janitor::clean_names(fisheries)
names(fisheries)
fisheries$country<- as.factor(fisheries$country)
fisheries$isscaap_group_number<- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area<- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
names(fisheries_tidy)
fisheries_tidy%>%
summarise(country_count= n_distinct(country))
fisheries_tidy%>%
group_by(country)%>%
summarise(n_distinct())
names(fisheries_tidy)
fisheries_tidy %>%
select(c(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch))
fisheries_tidy%>%
group_by(asfis_species_number) %>%
count(asfis_species_number, sort = T ) %>%
n_distinct("asfis_species_number")
fisheries_tidy %>%
select(catch, country, year) %>%
filter(year == "2000") %>%
group_by(country) %>%
summarise(catch2000=sum(catch, na.rm = T),
totaln=n(),.groups = 'keep') %>%
arrange(desc(catch2000)) %>%
head(catch2000, n =5)
fisheries_tidy %>%
select(country, asfis_species_name, catch, year) %>%
filter(between(year, 1990,2000)) %>%
filter(asfis_species_name=="Sardina pilchardus") %>%
group_by(country) %>%
summarise(total_sardines=sum(catch, na.rm = T),
totaln=n(),.groups = 'keep') %>%
arrange(desc(total_sardines)) %>%
head(total_sardines, n=3)
fisheries_tidy %>%
select(!asfis_species_number) %>%
filter(isscaap_taxonomic_group=="Squids, cuttlefishes, octopuses") %>%
filter(asfis_species_name=="Cephalopoda") %>%
filter(year>=2008, year<=2012) %>%
group_by(country) %>%
summarise(most_cephalopods=sum(catch, na.rm = T),
totaln=n(),.groups = 'keep') %>%
arrange(desc(most_cephalopods))
fisheries_tidy %>%
filter(between(year, 2008, 2012)) %>%
group_by(asfis_species_name) %>%
summarize(highest_species_catch=sum(catch, na.rm = T),
totaln=n(),.groups = 'keep') %>%
arrange(desc(highest_species_catch)) %>%
head(n=2)
fisheries_tidy %>%
filter(between(year, 2003,2012)) %>%
filter(country=="Brazil") %>%
group_by(asfis_species_name) %>%
summarize(brazil_catch_total=sum(catch, na.rm = T),
totaln=n(),.groups = 'keep') %>%
arrange(desc(brazil_catch_total)) %>%
head(n=10)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
amniota <- readr::read_csv("data/amniota.csv")
amphibio <- readr::read_csv("data/amphibio.csv")
amphibio <- janitor::clean_names(amphibio)
glimpse(amniota)
glimpse(amphibio)
amniota %>% summarize(number_nas = sum(is.na(amniota)))
amphibio %>% summarize(number_nas = sum(is.na(amphibio)))
amniota_tidy <- amniota %>%
na_if("-999") #convert all -999 values to NA
amniota_tidy %>%
summarize(number_nas = sum(is.na(amniota_tidy))) #how many NAs
amniota_tidy %>%
filter(female_maturity_d=="-30258.711")
names(amniota_tidy)
amniota_tidy %>%
select(genus, species, female_maturity_d) %>%
mutate(female_maturity_d2=ifelse(female_maturity_d<0, NA, female_maturity_d))%>%
arrange(female_maturity_d2)
#amniota_tidy <- amniota %>%
#  na_if(-999) %>%
#  mutate(female_maturity_d=na_if(female_maturity_d, (-30258.7)))
naniar::miss_var_summary(amniota_tidy) #how many NAs with percentages
naniar::miss_var_summary(amphibio)
amniota_tidy %>%
select(class, egg_mass_g) %>%
group_by(class) %>%
naniar::miss_var_summary(order=T)
amphibio %>%
select(fos, ter, arb, aqu) %>%
summarise_all(~(sum(is.na(.))))
amphibio %>%
select(fos, ter, aqu, arb) %>%
naniar::miss_var_summary()
amniota_pre <-
readr::read_csv(file = "data/amniota.csv", na = c("-999"))
amniota_pre %>% summarize(number_nas = sum(is.na(amniota_pre)))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota <- readr:: read_csv("data/amniota.csv")
amniota <- amniota %>%
clean_names()
setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota <- readr:: read_csv("data/amniota.csv")
amniota <- amniota %>%
clean_names()
setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota <- readr:: read_csv("data/amniota.csv")
amniota <- amniota %>%
clean_names()
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amphibio <- readr::read_csv("data/amphibio.csv")
amphibio <- amphibio %>%
clean_names()
amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas")
amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
amniota_na <- amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amniota_na
amphibio_na <- amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amphibio_na
setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota <- readr:: read_csv("data/amniota.csv")
amniota <- amniota %>%
clean_names()
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amphibio <- readr::read_csv("data/amphibio.csv")
amphibio <- amphibio %>%
clean_names()
amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas")
amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
amniota_na <- amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amniota_na
amphibio_na <- amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amphibio_na
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota_clean <-
readr :: read_csv("data/amniota.csv",
na = c("NA", " ", ".", "-999"))
setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota <- readr:: read_csv("data/amniota.csv")
amniota <- amniota %>%
clean_names()
# setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amphibio <- readr::read_csv("data/amphibio.csv")
amphibio <- amphibio %>%
clean_names()
amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas")
amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
amniota_na <- amniota %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amniota_na
amphibio_na <- amphibio %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(),
names_to = "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas)) %>%
summarise(total_num_nas = sum(num_nas))
amphibio_na
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amniota_clean <-
readr :: read_csv("data/amniota.csv",
na = c("NA", " ", ".", "-999"))
#setwd("~/Documents/GitHub/BIS15W2021_jviswanathan/lab7/data")
amphibio_clean <-
clean_names(amphibio)
readr :: read_csv("data/amphibio.csv",
na = c("NA", " ", ".", "-999"))
naniar :: miss_var_summary(amniota_clean)
naniar :: miss_var_summary(amphibio_clean)
names(amniota_clean)
amniota_clean %>%
group_by(class) %>%
select(egg_mass_g) %>%
naniar :: miss_var_summary(egg_mass_g = T) %>%
arrange(desc(pct_miss))
#for mammals, the data make sense. however, for reptiles, this data do not make sense.
amphibio_clean %>%
select(fos, ter, aqu, arb) %>%
naniar :: miss_var_summary(fos = T, ter = T, aqu = T, ter = T)
#The 'NAs' in this data frame may actually mean "no", rather than an invalid data entry.
# I would change all the "NA" to a value of 0.
